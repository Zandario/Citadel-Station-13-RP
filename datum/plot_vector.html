<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;plot_vector - Citadel Station 13 - Roleplay</title>
</head>
<body>
<header>
    <a href="index.html">Citadel Station 13 - Roleplay</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/plot_vector.html#var">Var Details</a></header>
<main>
<h1>plot_vector <aside>/<a href="datum.html">datum</a>/<a href="datum/plot_vector.html">plot_vector</a></aside>
        
    
            <a href="https://github.com/Zandario/Citadel-Station-13-RP/blob/c34e6aca5d1b78375a406ed669b897cf0a26cf8c/code/__HELPERS/vector.dm#L45">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;vector.dm 45"/></a></h1>

<p>plot_vector is a helper datum for plotting a path in a straight line towards a target turf.
This datum converts from world space (turf.x and turf.y) to pixel space, which the datum keeps track of itself. This
should work with any size turfs (i.e. 32x32, 64x64) as it references world.icon_size (note: not actually tested with
anything other than 32x32 turfs).</p>
<p>setup()
This should be called after creating a new instance of a plot_vector datum.
This does the initial setup and calculations. Since we are travelling in a straight line we only need to calculate
the	vector and x/y steps once. x/y steps are capped to 1 full turf, whichever is further. If we are travelling along
the y axis each step will be +/- 1 y, and the x movement reduced based on the angle (tangent calculation). After
this every subsequent step will be incremented based on these calculations.
Inputs:
source - the turf the object is starting from
target - the target turf the object is travelling towards
xo - starting pixel_x offset, typically won't be needed, but included in case someone has a need for it later
yo - same as xo, but for the y_pixel offset</p>
<p>increment()
Adds the offset to the current location - incrementing it by one step along the vector.</p>
<p>return_angle()
Returns the direction (angle in degrees) the object is travelling in.</p>
<pre><code>         (N)
         90ï¿½
          ^
          |
</code></pre>
<p>(W) 180ï¿½ &lt;--+--&gt; 0ï¿½ (E)
|
v
-90ï¿½
(S)</p>
<p>return_hypotenuse()
Returns the distance of travel for each step of the vector, relative to each full step of movement. 1 is a full turf
length. Currently used as a multiplier for scaling effects that should be contiguous, like laser beams.</p>
<p>return_location()
Returns a vector_loc datum containing the current location data of the object (see /datum/vector_loc). This includes
the turf it currently should be at, as well as the pixel offset from the centre of that turf. Typically increment()
would be called before this if you are going to move an object based on it's vector data.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/plot_vector.html#var/angle">angle</a></th><td>Direction of travel in degrees.</td></tr>
            <tr><th><a href="datum/plot_vector.html#var/loc_x">loc_x</a></th><td>In pixels from the left edge of the map.</td></tr>
            <tr><th><a href="datum/plot_vector.html#var/loc_y">loc_y</a></th><td>In pixels from the bottom edge of the map.</td></tr>
            <tr><th><a href="datum/plot_vector.html#var/loc_z">loc_z</a></th><td>loc z is in world space coordinates (i.e. z level) - we don't care about measuring pixels for this.</td></tr>
            <tr><th><a href="datum/plot_vector.html#var/offset_x">offset_x</a></th><td>Distance to increment each step.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/angle"><aside class="declaration">var </aside>angle
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Zandario/Citadel-Station-13-RP/blob/c34e6aca5d1b78375a406ed669b897cf0a26cf8c/code/__HELPERS/vector.dm#L49">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;vector.dm 49"/></a></h3>
        <p>Direction of travel in degrees.</p><h3 id="var/loc_x"><aside class="declaration">var </aside>loc_x
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Zandario/Citadel-Station-13-RP/blob/c34e6aca5d1b78375a406ed669b897cf0a26cf8c/code/__HELPERS/vector.dm#L51">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;vector.dm 51"/></a></h3>
        <p>In pixels from the left edge of the map.</p><h3 id="var/loc_y"><aside class="declaration">var </aside>loc_y
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Zandario/Citadel-Station-13-RP/blob/c34e6aca5d1b78375a406ed669b897cf0a26cf8c/code/__HELPERS/vector.dm#L53">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;vector.dm 53"/></a></h3>
        <p>In pixels from the bottom edge of the map.</p><h3 id="var/loc_z"><aside class="declaration">var </aside>loc_z
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Zandario/Citadel-Station-13-RP/blob/c34e6aca5d1b78375a406ed669b897cf0a26cf8c/code/__HELPERS/vector.dm#L55">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;vector.dm 55"/></a></h3>
        <p>loc z is in world space coordinates (i.e. z level) - we don't care about measuring pixels for this.</p><h3 id="var/offset_x"><aside class="declaration">var </aside>offset_x
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Zandario/Citadel-Station-13-RP/blob/c34e6aca5d1b78375a406ed669b897cf0a26cf8c/code/__HELPERS/vector.dm#L57">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;vector.dm 57"/></a></h3>
        <p>Distance to increment each step.</p></main>
<footer>
    citadel.dme
    <a href="https://github.com/Zandario/Citadel-Station-13-RP/tree/c34e6aca5d1b78375a406ed669b897cf0a26cf8c">c34e6ac</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.4.1</a></footer>
</body>
</html>
